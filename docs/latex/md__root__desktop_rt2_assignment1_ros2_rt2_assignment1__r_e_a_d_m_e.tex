\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md1}{}\doxysection{Packages needed}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md1}
In this part of the assignment in order to create a bridge between R\+OS and R\+O\+S2 and make nodes communicates \href{https://github.com/ros2/ros1_bridge}{\texttt{ ros1\+\_\+bridge}} package is required.\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md2}{}\doxysubsection{Behaviour of the software architecture}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md2}
The main task is to make communicate R\+OS nodes {\bfseries{user\+\_\+interface.\+py}}, {\bfseries{go\+\_\+to\+\_\+point.\+py}} with R\+O\+S2 nodes {\bfseries{\mbox{\hyperlink{state__machine_8cpp}{state\+\_\+machine.\+cpp}}}}, {\bfseries{\mbox{\hyperlink{position__service_8cpp}{position\+\_\+service.\+cpp}}}} through a R\+OS bridge maintaing the behaviour of the system unchanged. The {\bfseries{\mbox{\hyperlink{namespacert2__assignment1}{rt2\+\_\+assignment1}}}} with ros2 branch is a R\+O\+S2 C\+Make package. The c++ nodes are implemented as components and uploaded inside a container. To do that they have been implemented as Classes.\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md3}{}\doxysubsubsection{srv folder}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md3}
It contains three custome services, the three services are defined identical to services inside {\bfseries{\mbox{\hyperlink{namespacert2__assignment1}{rt2\+\_\+assignment1}}}} with main branch services\+:
\begin{DoxyEnumerate}
\item {\bfseries{Random\+Position}}
\item {\bfseries{Command}}
\item {\bfseries{Position}}
\end{DoxyEnumerate}\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md4}{}\doxysubsubsection{launch folder}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md4}
It contains\+:
\begin{DoxyEnumerate}
\item {\bfseries{\mbox{\hyperlink{all__launch_8py}{all\+\_\+launch.\+py}}}}\+: a launch file to run the container and the two executables.
\end{DoxyEnumerate}\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md5}{}\doxysubsubsection{src folder}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md5}
Inside this folder there are the c++ code files.


\begin{DoxyEnumerate}
\item {\bfseries{\mbox{\hyperlink{position__service_8cpp}{position\+\_\+service.\+cpp}}}}\+: this is a service server node that given as a request a minimum and a maximum value of x and y coordinate both return as response a random value for x, y and theta.
\end{DoxyEnumerate}
\begin{DoxyEnumerate}
\item {\bfseries{\mbox{\hyperlink{state__machine_8cpp}{state\+\_\+machine.\+cpp}}}}\+: the state machine is a service server that can be activated or deactivated managing a boolean variable {\itshape start} set as request by the {\bfseries{user\+\_\+interface.\+cpp}} node. The node is a service client of the $\ast$$\ast$/position\+\_\+server$\ast$$\ast$ and of $\ast$$\ast$/go\+\_\+to\+\_\+point$\ast$$\ast$. It asks for a random position and if it is activated it set the response values as $\ast$$\ast$/go\+\_\+to\+\_\+point$\ast$$\ast$ request.
\end{DoxyEnumerate}\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md6}{}\doxysubsubsection{mapping\+\_\+rule.\+yaml}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md6}
It is a file containing the mapping rule used to compile the bridge.\hypertarget{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md7}{}\doxysubsection{How to run the scene.}\label{md__root__desktop_rt2_assignment1_ros2_rt2_assignment1__r_e_a_d_m_e_autotoc_md7}

\begin{DoxyEnumerate}
\item Go inside a folder where the file to source R\+OS, R\+O\+S2 and the bridge are contained
\item execute
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{./all\_simulation.sh}
\end{DoxyCode}


alternatively


\begin{DoxyEnumerate}
\item inside a R\+OS terminal run \+:
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{roslaunch rt2\_assignment1 sim2.launch}
\end{DoxyCode}



\begin{DoxyEnumerate}
\item inside a R\+O\+S12 terminal run \+:
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{ros2 run ros1\_bridge dynamic\_bridge -\/-\/bridge-\/all-\/topics}
\end{DoxyCode}



\begin{DoxyEnumerate}
\item inside a R\+O\+S2 terminal run \+:
\end{DoxyEnumerate}


\begin{DoxyCode}{0}
\DoxyCodeLine{ros2 launch rt2\_assignment1 all\_launch.py}
\end{DoxyCode}
 